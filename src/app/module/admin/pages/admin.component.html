<div class="flex w-full h-screen flex-col">
  <div class="flex items-center justify-between p-4 bg-gray-800 text-white">
    <a routerLink="" class="text-xl font-bold">Fairmount </a>
    <div class="flex items-center space-x-4">
      <div
        class="px-4 py-2 hover:bg-gray-700 rounded cursor-pointer text-white"
        (click)="openMoreOptions()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="white"
          x="0px"
          y="0px"
          width="20"
          height="20"
          viewBox="0 0 50 50"
        >
          <path
            d="M 2 9 L 2 11 L 48 11 L 48 9 L 2 9 z M 2 24 L 2 26 L 48 26 L 48 24 L 2 24 z M 2 39 L 2 41 L 48 41 L 48 39 L 2 39 z"
          ></path>
        </svg>
      </div>
    </div>
  </div>
  <!-- po list-->
  <section class="p-2">
    <div class="flex items-center">
      <p class="text-3xl text-gray-700 font-bold">Purchase Order Management</p>
      <button
        type="button"
        class="ml-auto text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
        (click)="openAddPo()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-4 h-4 me-2"
        >
          <rect x="3" y="5" width="18" height="14" rx="2" stroke-width="1.5" />
          <path stroke-width="1.5" d="M7 9h10M7 13h6" />
        </svg>
        New PO
      </button>
    </div>
    <div class="overflow-x-auto shadow-lg p-2 sm:rounded-lg mt-2">
      <div *ngIf="!isLoading">
        <table
          mat-table
          class="mat-elevation-z8"
          [dataSource]="sortedData"
          (matSortChange)="sortData($event)"
          matSort
          #empTbSort="matSort"
        >
          <ng-container matColumnDef="poNumber">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="poNumber">
              #PO
            </th>
            <td mat-cell *matCellDef="let element">{{ element.poNumber }}</td>
          </ng-container>
          <ng-container matColumnDef="customerName">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header="customerName"
            >
              Customer Name
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.customer.customerName }}
            </td>
          </ng-container>
          <ng-container matColumnDef="orderDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="orderDate">
              Order Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.orderDate | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="modeOfShipment">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header="modeOfShipment"
            >
              Mode of Shipment
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.modeOfShipment }}
            </td>
          </ng-container>
          <ng-container matColumnDef="totalCost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="totalCost">
              Total Cost
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.totalCost | currency : "USD" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="totalAmount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="totalAmount">
              Total Amount
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.totalAmount | currency : "USD" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="description">
              Description
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.description }}
            </td>
          </ng-container>
          <ng-container matColumnDef="createdBy">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="createdBy">
              Created By
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.user.fullName }}
            </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element">
              <button
                (click)="$event.stopPropagation()"
                type="button"
                class="bg-transparent"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  class="w-6 h-6 fill-red-400 hover:fill-red-600"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </td>
          </ng-container>

          <!-- Header row definition -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

          <!-- Data rows -->
          <tr
            mat-row
            *matRowDef="let element; columns: displayedColumns"
            class="example-element-row"
            (click)="openPOModel(element)"
          ></tr>
        </table>
      </div>

      <div class="mt-10" *ngIf="!isLoading && sortedData.data?.length === 0">
        <p class="no-data-row text-center mt-5 text-gray-500 text-xl">
          No data to display
        </p>
      </div>
      <div class="mt-10" *ngIf="isLoading">
        <p class="no-data-row text-center text-gray-500 text-xl">
          Loading data...
        </p>
      </div>
    </div>
  </section>
  <!-- pagination -->
  <mat-paginator
    class=""
    #paginator
    [length]="sortedData.data.length"
    [pageSize]="10"
    [pageSizeOptions]="[10, 50, 80, 100]"
  ></mat-paginator>

  <div>
    <app-side-nav
      [class.hidden]="!showSideNav"
      (onClick)="showSideNav = false"
    ></app-side-nav>
    <app-po-model
      *ngIf="showModel"
      [po]="po"
      (onClick)="showModel = false"
    ></app-po-model>
    <app-add-po
      *ngIf="showAddPo"
      [customers]="customers"
      (onClick)="closeAddPo()"
    ></app-add-po>
    <router-outlet></router-outlet>
  </div>
</div>
